# ğŸ—ï¸ Arquitectura de Pruebas - ViveMedellin Backend

## Arquitectura General del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     VIVEMEDELLIN BACKEND                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   CAPA DE PRESENTATION                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚   Auth      â”‚ â”‚Category  â”‚ â”‚ Post   â”‚ â”‚ User   â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ Controller  â”‚ â”‚Controllerâ”‚ â”‚CtrlDue â”‚ â”‚Ctrl    â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚         â”‚             â”‚           â”‚         â”‚             â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                       â–¼                                    â”‚   â”‚
â”‚  â”‚  âœ… PRUEBAS DE INTEGRATION (Controllers)                  â”‚   â”‚
â”‚  â”‚     - 33 tests cubriendo todos los endpoints              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   CAPA DE SERVICIOS                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  User       â”‚ â”‚ Category â”‚ â”‚  Post / Comment   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ Service     â”‚ â”‚ Service  â”‚ â”‚  Services         â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚         â”‚             â”‚                â”‚               â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚  â”‚                       â–¼                                â”‚   â”‚
â”‚  â”‚  âœ… PRUEBAS DE INTEGRATION (Services)                â”‚   â”‚
â”‚  â”‚     - 13 tests cubriendo lÃ³gica de negocio           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               CAPA DE ACCESO A DATOS                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   User       â”‚ â”‚  Category    â”‚ â”‚    Post       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ Repository   â”‚ â”‚  Repository  â”‚ â”‚  Repository   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚         â”‚                â”‚                 â”‚            â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚                       â–¼                                  â”‚   â”‚
â”‚  â”‚  âœ… PRUEBAS DE INTEGRATION (Repositories)              â”‚   â”‚
â”‚  â”‚     - 19 tests cubriendo acceso a BD                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                BASE DE DATOS H2                          â”‚   â”‚
â”‚  â”‚        (En memoria para pruebas rÃ¡pidas)                â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ USERS   â”‚ â”‚CATEGORIESâ”‚ â”‚ POSTS  â”‚ â”‚COMMENTS  â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flujo de Pruebas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EJECUCIÃ“N DE PRUEBAS DE INTEGRACIÃ“N                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. INICIO
   â”‚
   â”œâ”€ Configura perfil "test"
   â”‚  â””â”€ application-test.properties
   â”‚     â”œâ”€ Base de datos H2
   â”‚     â”œâ”€ Puerto aleatorio
   â”‚     â””â”€ Auto-limpieza (create-drop)
   â”‚
   â”œâ”€ Carga contexto de Spring
   â”‚  â””â”€ @SpringBootTest
   â”‚     â”œâ”€ Inicializa @AutoConfigureMockMvc
   â”‚     â””â”€ Carga todas las capas
   â”‚
   â”œâ”€ PRUEBAS DE CONTROLLERS (33 tests)
   â”‚  â”œâ”€ MockMvc simula requests HTTP
   â”‚  â”œâ”€ Verifica status codes
   â”‚  â”œâ”€ Valida responses JSON
   â”‚  â””â”€ Prueba errores 400, 404, etc.
   â”‚
   â”œâ”€ PRUEBAS DE SERVICES (13 tests)
   â”‚  â”œâ”€ Llama servicios directamente
   â”‚  â”œâ”€ Valida lÃ³gica de negocio
   â”‚  â”œâ”€ Prueba transacciones
   â”‚  â””â”€ Verifica excepciones
   â”‚
   â”œâ”€ PRUEBAS DE REPOSITORIES (19 tests)
   â”‚  â”œâ”€ Acceso directo a BD H2
   â”‚  â”œâ”€ CRUD operations
   â”‚  â”œâ”€ Custom queries
   â”‚  â””â”€ Restricciones
   â”‚
   â”œâ”€ PRUEBAS E2E (3 tests)
   â”‚  â”œâ”€ Usuario â†’ CategorÃ­a â†’ Post
   â”‚  â”œâ”€ Validaciones en flujo
   â”‚  â””â”€ CRUD completo
   â”‚
   â””â”€ FIN
      â””â”€ Resultado: BUILD SUCCESS o FAILED
```

## Estructura de Archivos

```
ViveMedellin-Backend/
â”‚
â”œâ”€â”€ vivemedellinbackend/
â”‚   â”œâ”€â”€ pom.xml                                  âœ… Updated
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â””â”€â”€ java/com/vivemedellin/
â”‚   â”‚   â”‚       â”œâ”€â”€ controllers/          (5 classes)
â”‚   â”‚   â”‚       â”œâ”€â”€ services/             (5+ classes)
â”‚   â”‚   â”‚       â”œâ”€â”€ repositories/         (4 classes)
â”‚   â”‚   â”‚       â””â”€â”€ models/               (6 classes)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ test/
â”‚   â”‚       â”œâ”€â”€ java/com/vivemedellin/
â”‚   â”‚       â”‚   â””â”€â”€ integration/          âœ… NEW
â”‚   â”‚       â”‚       â”œâ”€â”€ IntegrationTestBase.java
â”‚   â”‚       â”‚       â”œâ”€â”€ controllers/      âœ… NEW
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ AuthControllerIntegrationTest.java
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ CategoryControllerIntegrationTest.java
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ CommentControllerIntegrationTest.java
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ PostControllerIntegrationTest.java
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ UserControllerIntegrationTest.java
â”‚   â”‚       â”‚       â”œâ”€â”€ services/        âœ… NEW
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ CategoryServiceIntegrationTest.java
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ UserServiceIntegrationTest.java
â”‚   â”‚       â”‚       â”œâ”€â”€ repositories/    âœ… NEW
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ CategoryRepositoryIntegrationTest.java
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ UserRepositoryIntegrationTest.java
â”‚   â”‚       â”‚       â””â”€â”€ e2e/             âœ… NEW
â”‚   â”‚       â”‚           â””â”€â”€ EndToEndFlowIntegrationTest.java
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ resources/
â”‚   â”‚           â””â”€â”€ application-test.properties   âœ… NEW
â”‚   â”‚
â”‚   â””â”€â”€ target/
â”‚       â”œâ”€â”€ classes/
â”‚       â””â”€â”€ test-classes/
â”‚
â”œâ”€â”€ ğŸ“„ TESTING_GUIDE.md                          âœ… NEW
â”œâ”€â”€ ğŸ“„ TESTING_PATTERNS.md                       âœ… NEW
â”œâ”€â”€ ğŸ“„ INTEGRATION_TESTING_README.md             âœ… NEW
â”œâ”€â”€ ğŸ“„ IMPLEMENTATION_SUMMARY.md                 âœ… NEW
â”œâ”€â”€ ğŸ“„ TEST_INDEX.md                            âœ… NEW
â”œâ”€â”€ ğŸ“„ QUICK_VERIFICATION.md                    âœ… NEW
â”œâ”€â”€ ğŸ”§ run-tests.bat                            âœ… NEW
â””â”€â”€ ğŸ”§ run-tests.sh                             âœ… NEW
```

## Matriz de Cobertura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Capa         â”‚ Clases       â”‚ Tests        â”‚ Cobertura   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Controllers   â”‚ 5            â”‚ 33           â”‚ âœ… 100%     â”‚
â”‚ Services      â”‚ 2 (+ testing)â”‚ 13           â”‚ âœ… 100%     â”‚
â”‚ Repositories  â”‚ 2            â”‚ 19           â”‚ âœ… 100%     â”‚
â”‚ E2E           â”‚ -            â”‚ 3            â”‚ âœ… 100%     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL         â”‚ 9+           â”‚ 68           â”‚ âœ… ~80%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ciclo de Vida de un Test

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CICLO DE VIDA - JUNIT 5                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

@SpringBootTest
@AutoConfigureMockMvc
@ActiveProfiles("test")
public class CategoryControllerIntegrationTest
    extends IntegrationTestBase {

    â”Œâ”€ SETUP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                             â”‚
    â”‚ 1. @BeforeEach setUp() {                   â”‚
    â”‚    categoryRepo.deleteAll();               â”‚
    â”‚    // Base de datos limpia                 â”‚
    â”‚ }                                          â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼
    â”Œâ”€ TEST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                             â”‚
    â”‚ 2. @Test                                   â”‚
    â”‚    public void testCreateCategory() {      â”‚
    â”‚                                             â”‚
    â”‚      // Arrange                            â”‚
    â”‚      CategoryDto dto = new CategoryDto();  â”‚
    â”‚      dto.setTitle("MÃºsica");               â”‚
    â”‚                                             â”‚
    â”‚      // Act                                â”‚
    â”‚      mockMvc.perform(                      â”‚
    â”‚        post("/api/categories")             â”‚
    â”‚      )                                     â”‚
    â”‚                                             â”‚
    â”‚      // Assert                             â”‚
    â”‚      .andExpect(status().isCreated())      â”‚
    â”‚      .andExpect(jsonPath("$.title",        â”‚
    â”‚                equalTo("MÃºsica")));        â”‚
    â”‚    }                                       â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼
    â”Œâ”€ CLEANUP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                             â”‚
    â”‚ 3. Base de datos se auto-limpia            â”‚
    â”‚    (create-drop en H2)                     â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼
    â”Œâ”€ RESULTADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                             â”‚
    â”‚ âœ… PASSED o âŒ FAILED                      â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Dependencias Utilizadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          STACK DE TESTING - ViveMedellin            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Spring Boot 3.3.5
    â”‚
    â”œâ”€ spring-boot-starter-test
    â”‚  â”œâ”€ JUnit 5 (Jupiter)
    â”‚  â”œâ”€ Mockito
    â”‚  â”œâ”€ AssertJ
    â”‚  â””â”€ Spring Test
    â”‚
    â”œâ”€ spring-boot-testcontainers
    â”‚  â”œâ”€ TestContainers
    â”‚  â””â”€ PostgreSQL Container
    â”‚
    â”œâ”€ spring-security-test
    â”‚  â”œâ”€ @WithMockUser
    â”‚  â””â”€ MockMvcBuilder
    â”‚
    â”œâ”€ H2 Database
    â”‚  â”œâ”€ En-memory DB
    â”‚  â”œâ”€ Auto-cleanup
    â”‚  â””â”€ Ultra rÃ¡pido
    â”‚
    â””â”€ REST Assured (futuro)
       â””â”€ API Testing
```

## EjecuciÃ³n en Paralelo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      EJECUCIÃ“N SECUENCIAL vs PARALELA               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SECUENCIAL (mvn test)
    Test 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    Test 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    Test 3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Total: ~2 minutos
    ...                    â”‚
    Test 68 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PARALELO (mvn test -T 1C)
    Test 1 â”€â”€â”
    Test 2 â”€â”€â”¼â”€â”€â”€â”€â”€â”
    Test 3 â”€â”€â”¤     â”œâ”€â”€ Total: ~30 segundos
    ...     â”€â”¤     â”‚
    Test 68â”€â”€â”´â”€â”€â”€â”€â”€â”˜
```

## Matriz de Tests por OperaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           OPERACIÃ“N â”‚ CONTROLLER â”‚ SERVICE â”‚ REPOSITORY â”‚ E2E    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CREATE (POST)       â”‚ âœ… 5       â”‚ âœ… 2    â”‚ âœ… 2       â”‚ âœ… 1  â”‚
â”‚ READ (GET)          â”‚ âœ… 12      â”‚ âœ… 2    â”‚ âœ… 6       â”‚ âœ… 1  â”‚
â”‚ UPDATE (PUT)        â”‚ âœ… 5       â”‚ âœ… 2    â”‚ âœ… 2       â”‚ âœ… 1  â”‚
â”‚ DELETE (DELETE)     â”‚ âœ… 4       â”‚ âœ… 2    â”‚ âœ… 2       â”‚ âœ… 1  â”‚
â”‚ VALIDATIONS         â”‚ âœ… 5       â”‚ âœ… 3    â”‚ âœ… 3       â”‚ âœ… 1  â”‚
â”‚ ERROR HANDLING      â”‚ âœ… 2       â”‚ âœ… 2    â”‚ âœ… 2       â”‚ âœ… 1  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flujo E2E Detallado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FLUJO COMPLETO - USUARIO CREA UN EVENTO              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PASO 1: Crear Usuario
    POST /api/users
    â”‚
    â”œâ”€ Controller recibe request
    â”œâ”€ Service valida datos
    â”œâ”€ Repository guarda en BD
    â””â”€ Retorna usuario creado (201 Created)

PASO 2: Crear CategorÃ­a
    POST /api/categories
    â”‚
    â”œâ”€ Controller recibe request
    â”œâ”€ Service valida datos
    â”œâ”€ Repository guarda en BD
    â””â”€ Retorna categorÃ­a creada (201 Created)

PASO 3: Crear Post en CategorÃ­a
    POST /api/posts
    â”‚
    â”œâ”€ Controller recibe request
    â”œâ”€ Service valida:
    â”‚  â”œâ”€ Usuario existe âœ“
    â”‚  â”œâ”€ CategorÃ­a existe âœ“
    â”‚  â””â”€ Datos vÃ¡lidos âœ“
    â”œâ”€ Repository guarda en BD
    â””â”€ Retorna post creado (201 Created)

PASO 4: Obtener Post
    GET /api/posts/{postId}
    â”‚
    â”œâ”€ Controller busca en BD
    â”œâ”€ Service procesa
    â”œâ”€ Repository consulta
    â””â”€ Retorna post (200 OK)

RESULTADO: âœ… Flujo completo exitoso
```

---

**Documento de Arquitectura**
Fecha: November 28, 2025
VersiÃ³n: 1.0
Estado: âœ… Completado
